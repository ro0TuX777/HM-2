{% extends 'frontend/base.html.jinja2' %}

{% block title %}Impact of CIP Values on Network Devices{% endblock %}

{% block content %}
<div class="container mx-auto p-4 mt-16">
    <h1 class="text-2xl font-bold mb-4">Impact of CIP Values on Network Devices</h1>

    <!-- Enhanced Historical Impact Section -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <h2 class="text-2xl font-semibold mb-6">Historical Impact of CIP Adjustments</h2>
        <p class="text-gray-600 mb-6">
            Analysis of how CIP value changes affect network metrics and risk levels over time. These visualizations 
            help identify patterns and correlations between CIP adjustments and system behavior.
        </p>

        <!-- Time Series Graphs -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
            <!-- CIP Values vs Time Graph -->
            <div class="bg-gray-50 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-4">CIP Values Over Time</h3>
                <div class="graph-placeholder h-64 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center">
                    <i class="fas fa-chart-line text-4xl text-gray-400 mb-2"></i>
                    <div class="text-center">
                        <p class="text-gray-500">Time Series of CIP Values</p>
                        <p class="text-sm text-gray-400 mt-2">Shows historical trends of PU, TL, and URS</p>
                    </div>
                </div>
                <div class="mt-4 grid grid-cols-3 gap-2">
                    <div class="flex items-center">
                        <span class="w-3 h-3 bg-blue-500 rounded-full mr-2"></span>
                        <span class="text-sm">PU</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-3 h-3 bg-red-500 rounded-full mr-2"></span>
                        <span class="text-sm">TL</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-3 h-3 bg-green-500 rounded-full mr-2"></span>
                        <span class="text-sm">URS</span>
                    </div>
                </div>
            </div>

            <!-- Device Metrics vs Time Graph -->
            <div class="bg-gray-50 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-4">Device Metrics Response</h3>
                <div class="graph-placeholder h-64 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center">
                    <i class="fas fa-chart-area text-4xl text-gray-400 mb-2"></i>
                    <div class="text-center">
                        <p class="text-gray-500">Metric Changes Over Time</p>
                        <p class="text-sm text-gray-400 mt-2">CPU, Memory, and Network usage trends</p>
                    </div>
                </div>
                <div class="mt-4 grid grid-cols-3 gap-2">
                    <div class="flex items-center">
                        <span class="w-3 h-3 bg-purple-500 rounded-full mr-2"></span>
                        <span class="text-sm">CPU</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></span>
                        <span class="text-sm">Memory</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-3 h-3 bg-indigo-500 rounded-full mr-2"></span>
                        <span class="text-sm">Network</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Correlation Analysis -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- PU Impact Analysis -->
            <div class="bg-white p-4 rounded-lg shadow">
                <h4 class="font-semibold text-blue-600 mb-2">Patch Urgency Impact</h4>
                <div class="graph-placeholder h-40 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center mb-2">
                    <i class="fas fa-chart-scatter text-2xl text-gray-400"></i>
                </div>
                <p class="text-sm text-gray-600">
                    Strong correlation with CPU spikes during patch windows
                </p>
            </div>

            <!-- TL Impact Analysis -->
            <div class="bg-white p-4 rounded-lg shadow">
                <h4 class="font-semibold text-red-600 mb-2">Threat Level Impact</h4>
                <div class="graph-placeholder h-40 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center mb-2">
                    <i class="fas fa-chart-scatter text-2xl text-gray-400"></i>
                </div>
                <p class="text-sm text-gray-600">
                    Direct relationship with memory usage and monitoring intensity
                </p>
            </div>

            <!-- URS Impact Analysis -->
            <div class="bg-white p-4 rounded-lg shadow">
                <h4 class="font-semibold text-green-600 mb-2">User Risk Impact</h4>
                <div class="graph-placeholder h-40 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center mb-2">
                    <i class="fas fa-chart-scatter text-2xl text-gray-400"></i>
                </div>
                <p class="text-sm text-gray-600">
                    Gradual influence on system resource allocation
                </p>
            </div>
        </div>
    </div>

    <!-- Enhanced Risk Indicators Section -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <h2 class="text-2xl font-semibold mb-6">Impact on Overall Network Risk</h2>

        <!-- Risk Summary Dashboard -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Overall Risk Score -->
            <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-4">Network Risk Score</h3>
                <div class="relative w-32 h-32 mx-auto">
                    <svg class="transform -rotate-90 w-32 h-32">
                        <circle cx="64" cy="64" r="60" stroke="#E5E7EB" stroke-width="8" fill="transparent"/>
                        <circle cx="64" cy="64" r="60" stroke="#3B82F6" stroke-width="8" fill="transparent"
                            stroke-dasharray="377" stroke-dashoffset="94"/>
                    </svg>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <span class="text-3xl font-bold text-blue-600">75%</span>
                    </div>
                </div>
                <div class="mt-4 text-center text-sm text-gray-600">
                    Current Overall Risk Level
                </div>
            </div>

            <!-- Risk Distribution -->
            <div class="col-span-2 bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold mb-4">Risk Distribution</h3>
                <div class="grid grid-cols-4 gap-4">
                    <div class="text-center">
                        <div class="w-full h-24 bg-red-100 rounded-t-lg relative">
                            <div class="absolute bottom-0 w-full h-3/4 bg-red-500 rounded-b-lg"></div>
                        </div>
                        <p class="text-sm mt-2">Critical</p>
                        <p class="text-xs text-gray-500">25%</p>
                    </div>
                    <div class="text-center">
                        <div class="w-full h-24 bg-orange-100 rounded-t-lg relative">
                            <div class="absolute bottom-0 w-full h-1/2 bg-orange-500 rounded-b-lg"></div>
                        </div>
                        <p class="text-sm mt-2">High</p>
                        <p class="text-xs text-gray-500">35%</p>
                    </div>
                    <div class="text-center">
                        <div class="w-full h-24 bg-yellow-100 rounded-t-lg relative">
                            <div class="absolute bottom-0 w-full h-1/3 bg-yellow-500 rounded-b-lg"></div>
                        </div>
                        <p class="text-sm mt-2">Medium</p>
                        <p class="text-xs text-gray-500">30%</p>
                    </div>
                    <div class="text-center">
                        <div class="w-full h-24 bg-green-100 rounded-t-lg relative">
                            <div class="absolute bottom-0 w-full h-1/4 bg-green-500 rounded-b-lg"></div>
                        </div>
                        <p class="text-sm mt-2">Low</p>
                        <p class="text-xs text-gray-500">10%</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Network Risk Heatmap -->
        <div class="mb-8">
            <h3 class="text-xl font-semibold mb-4">Network Risk Heatmap</h3>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <!-- Heatmap Grid -->
                <div class="md:col-span-3 grid grid-cols-4 gap-4">
                    <!-- Core Infrastructure -->
                    <div class="space-y-4">
                        <div class="p-4 bg-red-100 rounded-lg text-center">
                            <i class="fas fa-network-wired text-2xl text-red-600 mb-2"></i>
                            <p class="text-sm font-semibold">Core Router</p>
                            <p class="text-xs text-red-600">Critical Risk</p>
                        </div>
                        <div class="p-4 bg-orange-100 rounded-lg text-center">
                            <i class="fas fa-shield-alt text-2xl text-orange-600 mb-2"></i>
                            <p class="text-sm font-semibold">Firewall</p>
                            <p class="text-xs text-orange-600">High Risk</p>
                        </div>
                    </div>

                    <!-- Servers -->
                    <div class="space-y-4">
                        <div class="p-4 bg-orange-100 rounded-lg text-center">
                            <i class="fas fa-server text-2xl text-orange-600 mb-2"></i>
                            <p class="text-sm font-semibold">App Server</p>
                            <p class="text-xs text-orange-600">High Risk</p>
                        </div>
                        <div class="p-4 bg-yellow-100 rounded-lg text-center">
                            <i class="fas fa-database text-2xl text-yellow-600 mb-2"></i>
                            <p class="text-sm font-semibold">DB Server</p>
                            <p class="text-xs text-yellow-600">Medium Risk</p>
                        </div>
                    </div>

                    <!-- Network Devices -->
                    <div class="space-y-4">
                        <div class="p-4 bg-yellow-100 rounded-lg text-center">
                            <i class="fas fa-hdd text-2xl text-yellow-600 mb-2"></i>
                            <p class="text-sm font-semibold">Storage</p>
                            <p class="text-xs text-yellow-600">Medium Risk</p>
                        </div>
                        <div class="p-4 bg-green-100 rounded-lg text-center">
                            <i class="fas fa-print text-2xl text-green-600 mb-2"></i>
                            <p class="text-sm font-semibold">Printer</p>
                            <p class="text-xs text-green-600">Low Risk</p>
                        </div>
                    </div>

                    <!-- End Points -->
                    <div class="space-y-4">
                        <div class="p-4 bg-yellow-100 rounded-lg text-center">
                            <i class="fas fa-desktop text-2xl text-yellow-600 mb-2"></i>
                            <p class="text-sm font-semibold">Workstation</p>
                            <p class="text-xs text-yellow-600">Medium Risk</p>
                        </div>
                        <div class="p-4 bg-green-100 rounded-lg text-center">
                            <i class="fas fa-laptop text-2xl text-green-600 mb-2"></i>
                            <p class="text-sm font-semibold">Laptop</p>
                            <p class="text-xs text-green-600">Low Risk</p>
                        </div>
                    </div>
                </div>

                <!-- Risk Level Legend -->
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h4 class="font-semibold mb-4">Risk Level Legend</h4>
                    <div class="space-y-4">
                        <div class="flex items-center">
                            <div class="w-6 h-6 bg-red-100 rounded mr-2"></div>
                            <span class="text-sm">Critical Risk (0.8-1.0)</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-6 h-6 bg-orange-100 rounded mr-2"></div>
                            <span class="text-sm">High Risk (0.6-0.8)</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-6 h-6 bg-yellow-100 rounded mr-2"></div>
                            <span class="text-sm">Medium Risk (0.4-0.6)</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-6 h-6 bg-green-100 rounded mr-2"></div>
                            <span class="text-sm">Low Risk (0.0-0.4)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Risk Factors Summary -->
        <div class="bg-blue-50 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-4">Risk Factor Analysis</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white p-4 rounded-lg shadow">
                    <h4 class="font-semibold text-blue-600 mb-2">Infrastructure Risk</h4>
                    <p class="text-sm text-gray-600">
                        Core network components show elevated risk levels due to their critical role 
                        and exposure to threats.
                    </p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow">
                    <h4 class="font-semibold text-blue-600 mb-2">Server Risk</h4>
                    <p class="text-sm text-gray-600">
                        Application and database servers maintain moderate to high risk levels based 
                        on service criticality.
                    </p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow">
                    <h4 class="font-semibold text-blue-600 mb-2">Endpoint Risk</h4>
                    <p class="text-sm text-gray-600">
                        End-user devices show varying risk levels depending on user behavior and 
                        access patterns.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
